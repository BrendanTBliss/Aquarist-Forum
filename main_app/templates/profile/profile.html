{% extends 'base.html' %}
{% load static %}
{% block content %}
{% if user.is_authenticated %}


<div class="row py-5 px-4">
    <div class="col-xl-4 col-md-6 col-sm-10 mx-auto">

        <!-- Profile widget -->
        <div class="bg-white shadow rounded overflow-hidden">
            <div class="px-4 pt-0 pb-4 bg-dark"><br>
                <div class="media align-items-end profile-header">
                    <div class="profile mr-3"><img src="{% static 'images/aquaagoralogo.png' %}" alt="{% static 'images/aquaagoralogo.png' %}" height="60" class="rounded mb-2 img-thumbnail">
                    </div>
                    <div class="media-body mb-0 text-white">
                        <h4 class="mt-0 mb-0">{{ user.username }}</h4>
                        <p class="small mb-4"> <i class=""></i>Joined: {{ user.date_joined }}<br>Email: {{ user.email }}</p>
                        <form action="{% url 'profile_edit' user.id %}" method="POST">
                            {% csrf_token %}
                            {{ form.as_p }}
                                <button type="button" class="btn btn-dark btn-sm btn-block" style="width:90%">
                                    <input class="btn btn-sm text-white text-left" type="submit" value="Edit Profile">
                                </button>
                                <button type="button" class="btn btn-danger text-white btn-block mr-2" style="width: 90%;"><div class="card-action">
                                    <a class="text-white" onclick="return confirm('Are you sure you want to delete your account?')" href="{% url 'profile_delete' user.id %}">Delete</a>
                                </div>
                                </button>
                            
                        </form>
                    </div>
                </div>
            </div>
                <div class="py-4">
                    <h5 class="mb-3">Recent posts</h5>
                    {% for post in posts %}
            <div class="card mt-3">
                <div class="row no-gutters">
                    <div class="col-md-8">
                    <div class="card-body">
                        <h5 class="card-title">{{ post.title }}</h5>
                        <h5 class="card-title">{{ post.content }}</h5>
                        <p class="card-text"><small class="text-muted">{{ post.created_at }}</small></p>
                        <a href="{% url 'posts_detail' post.id %}" class="btn btn-dark btn-sm">Detail</a>
                    </div>
                    </div>
                </div>
            </div>
        {% endfor %}
                </div>
            </div>
        </div><!-- End profile widget -->

    </div>
</div>
</div>
{% else %}
<div class="container mt-5">
    <h2>Please login to view your profile</h2>
</div>
{% endif %}
{% endblock %}
